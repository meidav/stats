{% extends 'base.html' %}

{% block content %}
	<h1>{% block title %} Edit match {% endblock %}</h1>
	
	<!-- Current Match Info -->
	<div class="bg-card-bg rounded-xl p-6 shadow-lg border border-border-color max-w-4xl mx-auto mb-8">
		<h3 class="text-lg font-semibold text-primary mb-4">Current match details</h3>
		<div class="overflow-x-auto">
			<table class="w-full">
				<thead>
					<tr>
						<th class="text-left py-3 px-4 text-primary font-semibold">Date/Updated</th>
						<th class="text-left py-3 px-4 text-primary font-semibold">Winner</th>
						<th class="text-left py-3 px-4 text-primary font-semibold">Loser</th>
					</tr>
				</thead>
				<tbody>
					<tr class="hover:bg-gray-800 transition-colors">
						<td class="py-3 px-4 text-primary">
							<div class="font-medium">{{ (match[1])[0:10] }}</div>
							<div class="text-sm text-secondary">{{ (match[1])[11:19] }}</div>
						</td>
						<td class="py-3 px-4">
							<a href="{{ url_for('player_stats', year=year, name=match[2] ) }}" class="text-accent hover:text-accent-hover transition-colors">{{ match[2] }}</a>
						</td>
						<td class="py-3 px-4">
							<a href="{{ url_for('player_stats', year=year, name=match[4] ) }}" class="text-accent hover:text-accent-hover transition-colors">{{ match[4] }}</a>
						</td>
					</tr>
					<tr class="hover:bg-gray-800 transition-colors">
						<td class="py-3 px-4 text-primary">
							<div class="font-medium">{{ (match[6])[0:10] }}</div>
							<div class="text-sm text-secondary">{{ (match[6])[11:19] }}</div>
						</td>
						<td class="py-3 px-4 text-primary font-bold text-lg">{{ match[3] }}</td>
						<td class="py-3 px-4 text-primary font-bold text-lg">{{ match[5] }}</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>

	<!-- Edit Form -->
	<div class="max-w-2xl mx-auto p-6">
		<form method="post" class="bg-card-bg rounded-xl p-8 shadow-2xl border border-border-color">
			<datalist id="players">
				{% for player in players %}
					<option value="{{ player }}">
				{% endfor %}
			</datalist>
			
			<!-- Players Section -->
			<div class="mb-8">
				<h3 class="text-lg font-semibold text-primary mb-4">Players</h3>
				<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
					<div>
						<label for="winner" class="block text-sm font-medium text-primary mb-2">Winner</label>
						<input type="text" name="winner" id="winner" placeholder="Winner" value="{{ request.form['winner'] or match[2] }}" list="players" 
							   class="w-full px-4 py-3 bg-input-bg border border-border-color rounded-lg text-primary placeholder-secondary focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent transition-all">
					</div>
					<div>
						<label for="loser" class="block text-sm font-medium text-primary mb-2">Loser</label>
						<input type="text" name="loser" id="loser" placeholder="Loser" value="{{ request.form['loser'] or match[4] }}" list="players" 
							   class="w-full px-4 py-3 bg-input-bg border border-border-color rounded-lg text-primary placeholder-secondary focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent transition-all">
					</div>
				</div>
			</div>

			<!-- Scores Section -->
			<div class="mb-8">
				<h3 class="text-lg font-semibold text-primary mb-4">Scores</h3>
				<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
					<div>
						<label for="winner_score" class="block text-sm font-medium text-primary mb-2">Winner's score</label>
						<input type="number" pattern="[0-9]*" name="winner_score" id="winner_score" placeholder="Winner's score" value="{{ request.form['winner_score'] or match[3] }}" 
							   class="w-full px-4 py-3 bg-input-bg border border-border-color rounded-lg text-primary placeholder-secondary focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent transition-all">
					</div>
					<div>
						<label for="loser_score" class="block text-sm font-medium text-primary mb-2">Loser's score</label>
						<input type="number" pattern="[0-9]*" name="loser_score" id="loser_score" placeholder="Loser's score" value="{{ request.form['loser_score'] or match[5] }}" 
							   class="w-full px-4 py-3 bg-input-bg border border-border-color rounded-lg text-primary placeholder-secondary focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent transition-all">
					</div>
				</div>
			</div>
			
			<div class="text-center">
				<button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-8 rounded-lg shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-card-bg">
					Submit
				</button>
			</div>
		</form>
	</div>
{% endblock %}